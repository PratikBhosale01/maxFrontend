<app-loader *ngIf="loader"></app-loader>
<mat-tab-group animationDuration="0ms">
  <mat-tab label="Site Master List">
    <div class="row" style="margin-left: 2px;">
      <table>
          <thead>
            <tr>
              <th>Sr. No.</th>
              <th>Username</th>
              <th>Password</th>
              <th>Transaction Code</th>
          
              <th>Site_Name </th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of siteMaters; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ user.username }}</td>
              <td>{{ user.password }}</td>
              <td>{{ user.transactionCode }}</td>
          
              <td>{{ user.site.name }}</td>
              <td>
                <button class="btn btn-danger" (click)="deleteSiteMaster(user.id)">
                  Delete
                  <i class="fa-solid fa-trash" style="color: #080808; margin-left: 10px"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
  </div>
    
  </mat-tab>
  <mat-tab label="Add Site MAster">
    <div class="col-md-6  containe">
      <h5 style="color: white">Add Site_Master:-</h5>
    <form [formGroup]="siteMasterForm" (ngSubmit)="onSubmit()" >
      <div class="row" style="margin-top: 10px;">
        <div class="form-group col-md-6">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" required>
            <mat-error *ngIf="siteMasterForm.get('username').hasError('required')">
              Username is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="form-group col-md-6">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Password</mat-label>
            <input matInput formControlName="password" type="password" required>
            <mat-error *ngIf="siteMasterForm.get('password').hasError('required')">
              Password is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    
      <div class="row">
        <div class="form-group col-md-6">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Transaction Code</mat-label>
            <input matInput formControlName="transactionCode" required>
            <mat-error *ngIf="siteMasterForm.get('transactionCode').hasError('required')">
              Transaction Code is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="form-group col-md-6">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Site</mat-label>
            <mat-select formControlName="siteId" required>
              <mat-option *ngFor="let site of sites" [value]="site.id">
                {{ site.name }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="siteMasterForm.get('siteId').hasError('required')">
              Site is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    
     
    
      <div class="row" style="margin-top: 16px;">
        <div class="col-12 d-flex justify-content-center">
          <button mat-raised-button color="primary" type="submit">Submit</button>
        </div>
      </div>
    </form>
    </div>

  </mat-tab>
  <mat-tab label="Update Site MAster ">
    <div class="col-md-6  containe">
      <h5 style="color: white">Update Site_Master:-</h5>
      <form [formGroup]="siteMasterForm" (ngSubmit)="onUpdate()" >
        
        <!-- Site Master Selection -->
        <div class="row" style="margin-top: 10px;">
          <div class="form-group col-md-12">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Select Site Master</mat-label>
              <mat-select (selectionChange)="onSiteMasterChange($event)">
                <mat-option *ngFor="let siteMaster of siteMaters" [value]="siteMaster">
                  {{ siteMaster.username }} <!-- Adjust based on your site master object structure -->
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
    
        <!-- Existing form fields -->
    
        <div class="row" style="margin-top: 10px;">
          <div class="form-group col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Username</mat-label>
              <input matInput formControlName="username" required>
              <mat-error *ngIf="siteMasterForm.get('username').hasError('required')">
                Username is required
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Password</mat-label>
              <input matInput formControlName="password" type="password" required>
              <mat-error *ngIf="siteMasterForm.get('password').hasError('required')">
                Password is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>
    
        <div class="row">
          <div class="form-group col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Transaction Code</mat-label>
              <input matInput formControlName="transactionCode" required>
              <mat-error *ngIf="siteMasterForm.get('transactionCode').hasError('required')">
                Transaction Code is required
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-group col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Site</mat-label>
              <mat-select formControlName="siteId" required>
                <mat-option *ngFor="let site of sites" [value]="site.id">
                  {{ site.name }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="siteMasterForm.get('siteId').hasError('required')">
                Site is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row" style="margin-top: 16px;">
          <div class="col-12 d-flex justify-content-center">
            <button mat-raised-button color="primary" type="submit">Update</button>
          </div>
        </div>
      </form>
    </div>
    
  </mat-tab>
</mat-tab-group>






